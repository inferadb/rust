# Mise configuration for InferaDB Rust SDK
# https://mise.jdx.dev/
#
# Mise is used for:
# - Tool installation (Rust, cargo extensions)
# - Environment variable configuration
# - One-time development setup
#
# For daily development, use standard cargo commands.
# See README.md for common development workflows.

[tools]
rust = "1.92"
"cargo:cargo-llvm-cov" = "latest"
"cargo:cargo-udeps" = "latest"

[env]
# Rust optimization settings for development
CARGO_INCREMENTAL = "1"
CARGO_TERM_COLOR = "always"
RUST_BACKTRACE = "1"

# Performance tuning for compilation
CARGO_BUILD_JOBS = "{{ num_cpus() }}"

[tasks.setup]
description = "One-time development environment setup"
run = [
    "git config submodule.recurse true",
    "git config fetch.recurseSubmodules on-demand",
    "git submodule update --init --recursive --remote",
    "rustup component add rustfmt clippy rust-src rust-analyzer",
    "rustup toolchain install nightly --component rustfmt",
    "cargo fetch",
    "echo '\nâœ… Setup complete! Use standard cargo commands for development.'",
]
